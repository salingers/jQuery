<!DOCTYPE html>
<html>
    <head>
    	<title>Unit Testing - Testing user actions</title>
        <script src="../../jquery-1.3.2.min.js"></script>
        <link rel="stylesheet" href="http://jqueryjs.googlecode.com/svn/trunk/qunit/testsuite.css" type="text/css" media="screen" />
        <script type="text/javascript" src="http://jqueryjs.googlecode.com/svn/trunk/qunit/testrunner.js"></script>
        <script type="text/javascript">
        	var keylogger = {
			    log: null,
			    init: function() {
			        keylogger.log = [];
			        $(document).unbind("keydown").keydown(function(event) {
			            keylogger.log.push(event.keyCode);
			        });
			    }
			};
			
            test("basic keylogger behaviour", function() {
			    // initialize
			   keylogger.init();
			
			    // trigger event
			    var event = $.Event("keydown");
			    event.keyCode = 9;
			    $(document).trigger(event);
			
			    // verify expected behavior
			    same(keylogger.log.length, 1, "a key was logged");
			    same(keylogger.log[0], 9, "correct key was logged");
			});
        </script>
    </head>
    <body>
        <div id="main"></div>
    </body>
</html>
